<head>
     <!-- For Web Client View: import Web Meeting SDK CSS -->
    <link type="text/css" rel="stylesheet" href="https://source.zoom.us/2.4.0/css/bootstrap.css" />
    <link type="text/css" rel="stylesheet" href="https://source.zoom.us/2.4.0/css/react-select.css" />
   
   
   <script src="https://nicholas-gh.surfly.com/zoom5.js"></script>
   
    <script>

        // Surfly snippet
        (function(s,u,r,f,l,y){s[f]=s[f]||{init:function(){s[f].q=arguments}};
        l=u.createElement(r);y=u.getElementsByTagName(r)[0];l.async=1;
        l.src='https://surfly.com/surfly.js';y.parentNode.insertBefore(l,y);})
        (window,document,'script','Surfly');

        // The preferred way is to set session options from the Surfly web interface,
        // so in most cases you only need to provide a widget key below,
        // but you can also override any options here
        var settings = {
            widget_key: "e0e076d8b3ac4a25930679c0ba6ee629",
            hide_until_agent_joins: true,
            start_docked: true
        };

        // Surfly.init() must be called before any other API call
        Surfly.init(settings, function(init) {
        if (init.success && !Surfly.isInsideSession) {
            Surfly.session()
            .on("session_started", function(session, event) {
                // display the PIN of the current session
                document.querySelector("#sessidtarget").innerText = session.pin;
            })
            .on("viewer_joined", function(session, event) {
                // if the first viewer joins, redirect to a page of your choice
                if (event.count == 1) {
                session.relocate("https://www.surfly.com");
                }
            })
            .startLeader();
        }
        });
 
    </script>
</head>
<body>

     <!-- For either view: import Web Meeting SDK JS dependencies -->
    <script src="https://source.zoom.us/2.4.0/lib/vendor/react.min.js"></script>
    <script src="https://source.zoom.us/2.4.0/lib/vendor/react-dom.min.js"></script>
    <script src="https://source.zoom.us/2.4.0/lib/vendor/redux.min.js"></script>
    <script src="https://source.zoom.us/2.4.0/lib/vendor/redux-thunk.min.js"></script>
    <script src="https://source.zoom.us/2.4.0/lib/vendor/lodash.min.js"></script>

    <!-- For Component View -->
    <script src="https://source.zoom.us/2.4.0/zoom-meeting-embedded-2.4.0.min.js"></script>

    <h1>Landing Page Example</h1>
    Session Code: <span id="sessidtarget">...</span>
   <div id="meetingSDKElement"></div>
   
    <script>
 if(!Surfly.isInsideSession){
     
     var ZOOM_VERSION = "2.4.0";
     var ZOOM_SDK = "F6bWIoWYuIMXFpHz1IkR5iUBP5pOqJhbHm71";
     var ZOOM_MEETINGNO = 4237232374;
     var ZOOM_SIG;

     const postData = {'meetingNumber': 4237232374, 'role': 0};  
     fetch( "https://zoom-surfly-signature.herokuapp.com/", {
        body: JSON.stringify(postData),
        headers: {'Content-Type': 'application/json','Accept': 'application/json'},
        method: "post"
     }).then( (response) => { response.json().then(data => {

     console.log("Data: ", data);
     var ZOOM_SIG = data.signature;      

     const client = window.ZoomMtgEmbedded.createClient();
     let meetingSDKElement = document.getElementById('meetingSDKElement')

     client.init({
       debug: true,
       zoomAppRoot: meetingSDKElement,
       language: 'en-US',
       customize: {
         meetingInfo: [
           'topic',
           'host',
           'mn',
           'pwd',
          'telPwd',
           'invite',
           'participant',
           'dc',
           'enctype',
         ],
         toolbar: {
           buttons: [
             {
               text: 'Custom Button',
               className: 'CustomButton',
               onClick: () => {
                 console.log('custom button')
               }
             }
           ]
         }
       }
     })

     client.join({
       sdkKey: ZOOM_SDK,
       signature: ZOOM_SIG,
       meetingNumber: ZOOM_MEETINGNO,
       password: "",
       userName: "Nicholas"
     })
  
     });
   });
}
   </script>
   
</body>
